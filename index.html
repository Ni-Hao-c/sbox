<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MyProject - é¦–é¡µ</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <nav>
      <h1><a href="/">é£é¸Ÿçš„sbox</a></h1>
      <!-- æœç´¢æ¡† -->
      <div class="search-container">
        <input type="text" id="search-input" placeholder="æœç´¢æ–‡æ¡£ã€æ•™ç¨‹..." />
        <button onclick="performSearch()">ğŸ”</button>
      </div>
      <ul>
        <li><a href="docs/">API æ–‡æ¡£</a></li>
        <li><a href="tutorials/">æ–°æ‰‹æ•™ç¨‹</a></li>
      </ul>
    </nav>
  </header>

  <main class="hero">
    <h2>é£é¸Ÿçš„sbox</h2>
    <p>è®°å½•æˆ‘å…³äºsboxå­¦ä¹ </p>
    
    <div class="quick-links">
      <a href="docs/index.html">æŸ¥çœ‹ API æ–‡æ¡£ â†’</a>
      <a href="tutorials/index.html">å¼€å§‹æ–°æ‰‹æ•™ç¨‹ â†’</a>
    </div>
  </main>

  // æ·»åŠ æ•™ç¨‹åˆ—è¡¨åŒºåŸŸ
  <section class="tutorial-section">
    <div class="tutorial-index">
      <h2>æœ€æ–°æ•™ç¨‹</h2>
      <ul id="markdown-files-list" class="tutorial-list">
        <li class="loading">æ­£åœ¨åŠ è½½æ•™ç¨‹åˆ—è¡¨...</li>
      </ul>
    </div>
  </section>

  <script src="js/search.js"></script>
  // æ·»åŠ è·å–Markdownæ–‡ä»¶åˆ—è¡¨çš„è„šæœ¬
  <script>
    // é¡µé¢åŠ è½½å®Œæˆåè·å– Markdown æ–‡ä»¶åˆ—è¡¨
    document.addEventListener('DOMContentLoaded', function() {
      loadMarkdownFiles();
    });

    function loadMarkdownFiles() {
      const fileListElement = document.getElementById('markdown-files-list');
      
      // ä½¿ç”¨ fetch API è·å– Markdown æ–‡ä»¶åˆ—è¡¨
      fetch('tutorials/Markdown/')
        .then(response => {
          if (!response.ok) {
            throw new Error('ç½‘ç»œå“åº”é”™è¯¯');
          }
          return response.text();
        })
        .then(html => {
          // è§£æè¿”å›çš„ HTML å†…å®¹ï¼Œæå– Markdown æ–‡ä»¶é“¾æ¥
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          const links = doc.querySelectorAll('a');
          
          const markdownFiles = [];
          links.forEach(link => {
            const href = link.getAttribute('href');
            if (href && (href.endsWith('.md') || href.endsWith('.markdown'))) {
              markdownFiles.push({
                name: href,
                url: 'tutorials/Markdown/' + href
              });
            }
          });
          
          displayMarkdownFiles(markdownFiles);
        })
        .catch(error => {
          console.error('è·å–æ–‡ä»¶åˆ—è¡¨å¤±è´¥:', error);
          fileListElement.innerHTML = `<li class="error">åŠ è½½æ•™ç¨‹åˆ—è¡¨å¤±è´¥: ${error.message}</li>`;
        });
    }
    
    function displayMarkdownFiles(files) {
      const fileListElement = document.getElementById('markdown-files-list');
      
      if (files.length > 0) {
        const fileListHTML = files.map(file => 
          `<li><a href="${file.url}" target="_blank">${decodeURIComponent(file.name)}</a></li>`
        ).join('');
        
        fileListElement.innerHTML = fileListHTML;
      } else {
        fileListElement.innerHTML = '<li>æš‚æ— æ•™ç¨‹æ–‡ä»¶</li>';
      }
    }
  </script>
</body>
</html>