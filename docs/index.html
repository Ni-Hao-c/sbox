<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@5/dist/themes/addons/core-dark.min.css"
    media="(prefers-color-scheme: dark)" data-group="addon" data-sheet="core-dark-auto" />
  <!-- <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify/lib/themes/dark.css"> -->
</head>

<body>
  <div id="app"></div>
  <script>
    window.$docsify = {
      coverpage: true,
      loadNavbar: true,
      loadSidebar: true,
      subMaxLevel: 2,
      auto2top: true,
      //autoHeader: true,
      mergeNavbar: true,

      name: 'sbox',
      repo: '',
      //nameLink: 'rendme.md',
      // Custom file name
      coverpage: '_coverpage.md',
      pagination: {
        previousText: '上一卷',
        nextText: '下一卷',
        crossChapter: true,
        crossChapterText: true
      },

         ready: function () {
        // 动态加载 Gitalk 样式和脚本
        function loadGitalkResources() {
          // 检查是否已经加载了 Gitalk 样式
          if (!document.querySelector('link[href*="gitalk/dist/gitalk.css"]')) {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = '//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.css';
            document.head.appendChild(link);
          }

          // 检查是否已经加载了 Gitalk 脚本
          const scripts = [
            '//cdn.jsdelivr.net/npm/docsify/lib/plugins/gitalk.min.js',
            '//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js'
          ];
          
          let loadedScripts = 0;
          
          function checkAndInitGitalk() {
            loadedScripts++;
            if (loadedScripts === scripts.length) {
              initGitalk();
            }
          }
          
          scripts.forEach(src => {
            if (!document.querySelector(`script[src="${src}"]`)) {
              const script = document.createElement('script');
              script.src = src;
              script.onload = checkAndInitGitalk;
              document.body.appendChild(script);
            } else {
              checkAndInitGitalk();
            }
          });
        }

        // 初始化 Gitalk
        function initGitalk() {
          // 确保容器存在
          let container = document.getElementById('gitalk-container');
          if (!container) {
            container = document.createElement('div');
            container.id = 'gitalk-container';
            document.body.appendChild(container);
          }
          
          // 清空容器内容
          container.innerHTML = '';
          
          // 获取当前页面的 ID
          const id = decodeURI(window.location.pathname).slice(-50);
          console.log('Gitalk ID:', id);
          
          const gitalk = new Gitalk({
            id: id,
            clientID: 'Ov23liyYnscdZZWt60T9',
            clientSecret: 'c0c9a940697eb2b27a83a6b740a25bae2a607dfd',
            repo: 'sbox',
            owner: 'Ni-Hao-c',
            admin: ['Ni-Hao-c'],
            distractionFreeMode: false
          });
          
          gitalk.render('gitalk-container');
        }

        // 加载资源并初始化 Gitalk
        loadGitalkResources();
      },

       plugins: [
      function(hook) {
      hook.afterEach(function(html) {
         
      });
    }
  ]



     

    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>
  <!-- Docsify v4 -->
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-csharp.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>

  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@alertbox/docsify-footer/dist/docsify-footer.min.js"></script>

  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.css">

  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>

  
<script>
  const gitalk = new Gitalk({
 
    clientID: 'Ov23liyYnscdZZWt60T9',
    clientSecret: 'c0c9a940697eb2b27a83a6b740a25bae2a607dfd',
    repo: 'sbox',
    owner: 'Ni-Hao-c',
    admin: ['Ni-Hao-c'],
    // facebook-like distraction free mode
    distractionFreeMode: false
  })
</script>
 
</body>

</html>
